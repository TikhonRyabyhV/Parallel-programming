# Решение задачи переноса с помощью MPI
## Постановка задачи
Рассматривается уравнение переноса вида:
$\frac{\partial u}{\partial t} + a \frac{\partial u}{\partial x} = f(x, t), \quad a = 1$ \
на области 
$t \in [0, 100]$
, 
$x \in [0, 100]$
,  с начальными и граничными условиями: \
Начальное условие: 
$u(0, x) = \sin(\pi x / 100)$
, \
Граничное условие: 
$u(t, 0) = e^{-t / 100}$
, \
Правая часть: 
$f(x, t) = 0$
. \
Аналитическое решение: 
$u(t, x) = \sin(\pi (x - t) / 100)$
, если 
$x \geq t$
, иначе 
$u(t, x) = u(0, x - t)$
.
## Цель: численно решить уравнение, используя параллельные вычисления с библиотекой MPI, и оценить ускорение.
## Методы решения
### Численная схема
#### Сетка: 
$\tau = T / N_t = 100 / 5000 = 0.02$, 
$h = X / N_x = 100 / 4000 = 0.025$, 
$\tau / h = 0.8 \leq 1$,  \
что удовлетворяет условию устойчивости. 
#### Схема: 
Для 
$m = 1$
 или первого узла поддомена: схема "уголок": \
$u[k+1][m] = u[k][m] - \frac{\tau}{h} (u[k][m] - u[k][m-1]) + \tau f(x_{m-1/2}, t_{k+1/2})$ \
Для остальных узлов неявная схема: \
$u[k+1][m] = \frac{h (u[k][m] + u[k][m-1]) - \tau (u[k][m] - u[k][m-1]) + 2 \tau h f(x_{m-1/2}, t_{k+1/2}) - (h - \tau) u[k+1][m-1]}{h + \tau}$ \
Если 
$t_{k+1} < x_m$
, то 
$u[k+1][m] = \phi(x_m - t_{k+1})$
.
### Параллелизация
#### Разбиение: 
Динамическая балансировка: процессор с $rank = 0$ раздает блоки остальным. Эти процессоры после вычисления возвращают блоки, 
необходимые для последующих вычислений, а остальное кладут в файл со смещением.
#### Коммуникации: 
Обмен 
$u[k][m-1]$
 между соседними процессорами на каждом шаге ( k ). \
Синхронизация 
$u[k+1][m]$
 каждые SYNC_INTERVAL = 100 шагов. 
#### Оптимизация: 
Минимизация числа MPI_Bcast и сборов данных. 
### Вычисление ускорения
#### Данные о времени выполнения
$\text{size} = 1
: 
T_1 = 0.228115$
 секунд. \
$\text{size} = 4
: 
T_4 = 0.077647$
 секунд. \
$\text{size} = 8
: 
T_8 = 0.068122$
 секунд. 
#### Ускорение S 
$S_p = \frac{T_1}{T_p}$ \
Для 
$\text{size} = 4
:
S_4 = \frac{0.228115}{0.077647} \approx 2.938$ \
\
Для 
$\text{size} = 8
:
S_8 = \frac{0.228115}{0.068122} \approx 3.349$ 
#### Эффективность E
$E_p = \frac{S_p}{p}$ \
Для 
$\text{size} = 4
:
E_4 = \frac{2.938}{4} \approx 0.734 \quad (73.4$ %) \
\
Для 
$\text{size} = 8
:
E_8 = \frac{3.349}{8} \approx 0.419 \quad (41.9$ %)
## Выводы
Ускорение достигнуто: 
$S_4 \approx 2.938$
, 
$S_8 \approx 3.349$
. \
Эффективность падает с ростом числа процессов из-за увеличения коммуникационных накладных расходов.
